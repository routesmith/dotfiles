# ~/.zsh/functions.d/vg
#
# Fuzzy-search filenames only and open selected file in Neovim

vg() {
    local file
    file="$(fd --type f --hidden --follow --exclude .git . "${@:-.}" |
        fzf --ansi --preview '
      if [ -f {} ]; then
        bat --color=always --style=numbers --line-range=:500 {}
      else
        echo "Not a regular file: {}"
      fi
    ')"

    [[ -n $file ]] && nvim "$file"
}
